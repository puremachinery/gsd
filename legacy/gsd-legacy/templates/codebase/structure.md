# Structure Template

Template for `.planning/codebase/STRUCTURE.md` - captures physical file organization.

**Purpose:** Document where things physically live in the codebase. Answers "where do I put X?"

---

## File Template

```markdown
# Codebase Structure

**Analysis Date:** [YYYY-MM-DD]

## Directory Layout

[ASCII tree of top-level directories with purpose]

```
[project-root]/
├── [dir]/          # [Purpose]
├── [dir]/          # [Purpose]
├── [dir]/          # [Purpose]
└── [file]          # [Purpose]
```

## Directory Purposes

**[Directory Name]:**
- Purpose: [What lives here]
- Contains: [Types of files: e.g., "*.ext source files", "module directories"]
- Key files: [Important files in this directory]
- Subdirectories: [If nested, describe structure]

**[Directory Name]:**
- Purpose: [What lives here]
- Contains: [Types of files]
- Key files: [Important files]
- Subdirectories: [Structure]

## Key File Locations

**Entry Points:**
- [Path]: [Purpose: e.g., "CLI entry point"]
- [Path]: [Purpose: e.g., "Server startup"]

**Configuration:**
- [Path]: [Purpose: e.g., "TypedLanguage config"]
- [Path]: [Purpose: e.g., "Build configuration"]
- [Path]: [Purpose: e.g., "Environment variables"]

**Core Logic:**
- [Path]: [Purpose: e.g., "Business services"]
- [Path]: [Purpose: e.g., "Database models"]
- [Path]: [Purpose: e.g., "service handlers"]

**Testing:**
- [Path]: [Purpose: e.g., "Unit tests"]
- [Path]: [Purpose: e.g., "Test fixtures"]

**Documentation:**
- [Path]: [Purpose: e.g., "User-facing docs"]
- [Path]: [Purpose: e.g., "Developer guide"]

## Naming Conventions

**Files:**
- [Pattern]: [Example: e.g., "kebab-case.ext for modules"]
- [Pattern]: [Example: e.g., "PascalCase.ext for UIFramework modules"]
- [Pattern]: [Example: e.g., "*.test.ext for test files"]

**Directories:**
- [Pattern]: [Example: e.g., "kebab-case for feature directories"]
- [Pattern]: [Example: e.g., "plural names for collections"]

**Special Patterns:**
- [Pattern]: [Example: e.g., "index.ext for directory exports"]
- [Pattern]: [Example: e.g., "__tests__ for test directories"]

## Where to Add New Code

**New Feature:**
- Primary code: [Directory path]
- Tests: [Directory path]
- Config if needed: [Directory path]

**New Component/Module:**
- Implementation: [Directory path]
- Types: [Directory path]
- Tests: [Directory path]

**New Route/Command:**
- Definition: [Directory path]
- Handler: [Directory path]
- Tests: [Directory path]

**Utilities:**
- Shared helpers: [Directory path]
- Type definitions: [Directory path]

## Special Directories

[Any directories with special meaning or generation]

**[Directory]:**
- Purpose: [e.g., "Generated code", "Build output"]
- Source: [e.g., "Auto-generated by X", "Build artifacts"]
- Committed: [Yes/No - in .gitignore?]

---

*Structure analysis: [date]*
*Update when directory structure changes*
```

<good_examples>
```markdown
# Codebase Structure

**Analysis Date:** 2026-01-17

## Directory Layout

```
gsd/
├── core/                  # Platform-agnostic content
│   ├── templates/         # File structure templates
│   ├── references/        # Deep-dive guides
│   └── concepts/          # Workflow philosophy docs
├── platforms/
│   └── platform/          # Tool-specific implementation
│       ├── commands/gsd/  # Slash commands
│       ├── workflows/     # Orchestration workflows
│       └── agents/        # Subagent definitions
├── installer/             # Nim source
│   ├── src/               # Nim source files
│   └── gsd.nimble         # Build configuration
├── dist/                  # Built binaries (gitignored)
├── ARCHITECTURE.md        # System design spec
├── CHANGELOG.md           # Version history
├── LICENSE                # MIT license
└── README.md              # User documentation
```

## Directory Purposes

**core/templates/**
- Purpose: Document templates for .planning/ files
- Contains: Template definitions with frontmatter
- Key files: project.md, roadmap.md, plan.md, summary.md
- Subdirectories: codebase/ (stack/architecture/structure templates)

**core/references/**
- Purpose: Core philosophy and guidance documents
- Contains: principles.md, questioning.md, plan-format.md
- Key files: principles.md - system philosophy
- Subdirectories: None

**core/concepts/**
- Purpose: Workflow philosophy documentation
- Contains: context-engineering.md, phase-workflow.md
- Key files: context-engineering.md - why fresh contexts matter
- Subdirectories: None

**platforms/claude/commands/gsd/**
- Purpose: Tool-specific command definitions
- Contains: *.md files (one per command)
- Key files: new-project.md, plan-phase.md, execute-phase.md
- Subdirectories: None (flat structure)

**platforms/claude/workflows/**
- Purpose: Reusable multi-step procedures
- Contains: Workflow definitions called by commands
- Key files: execute-plan.md, research-phase.md
- Subdirectories: None

**platforms/claude/agents/**
- Purpose: Subagent definitions for Task tool
- Contains: Agent prompt definitions
- Key files: implementer.md, verifier.md, researcher.md
- Subdirectories: None

**installer/src/**
- Purpose: Nim source for CLI binary
- Contains: *.nim source files
- Key files: gsd.nim (entry), install.nim, statusline.nim
- Subdirectories: None

## Key File Locations

**Entry Points:**
- `installer/src/gsd.nim` - CLI entry point

**Configuration:**
- `installer/gsd.nimble` - Nim build configuration
- `.gitignore` - Excluded files

**Core Logic:**
- `installer/src/install.nim` - Installation logic
- `installer/src/statusline.nim` - Status bar hook
- `installer/src/config.nim` - Config resolution

**Testing:**
- `installer/tests/` - Nim unit tests

**Documentation:**
- `README.md` - User-facing installation and usage guide
- `ARCHITECTURE.md` - System design specification
- `TOOL.md` - Tool-specific instructions for working in this repo

## Naming Conventions

**Files:**
- kebab-case.md: Markdown documents
- snake_case.nim: Nim source files (or camelCase per preference)
- UPPERCASE.md: Important project files (README, CLAUDE, CHANGELOG)

**Directories:**
- kebab-case: All directories
- Plural for collections: templates/, commands/, workflows/, agents/

**Special Patterns:**
- {command-name}.md: Slash command definition
- gsd-{platform}-{arch}: Built binary naming

## Where to Add New Code

**New Slash Command:**
- Primary code: `platforms/claude/commands/gsd/{command-name}.md`
- Documentation: Update `README.md` with new command

**New Template:**
- Implementation: `core/templates/{name}.md`
- Documentation: Template is self-documenting (includes guidelines)

**New Workflow:**
- Implementation: `platforms/claude/workflows/{name}.md` (source)
- Installed to: `~/.claude/gsd/workflows/{name}.md` (flattened)
- Usage: Reference from command with `@~/.claude/gsd/workflows/{name}.md`

**New Reference Document:**
- Implementation: `core/references/{name}.md`
- Usage: Reference from commands/workflows as needed

**New Agent:**
- Implementation: `platforms/claude/agents/{name}.md`
- Usage: Referenced by execute-phase workflow

**New Installer Feature:**
- Implementation: `installer/src/{feature}.nim`
- Entry point: Update `installer/src/gsd.nim`

## Special Directories

**dist/**
- Purpose: Built binaries for distribution
- Source: Compiled from installer/src/
- Committed: No (gitignored)

**core/**
- Purpose: Platform-agnostic content shared across implementations
- Source: Manually authored
- Committed: Yes

**platforms/claude/**
- Purpose: Resources installed to ~/.claude/
- Source: Copied by gsd binary during installation
- Committed: Yes (source of truth)

---

*Structure analysis: 2026-01-17*
*Update when directory structure changes*
```
</good_examples>

<guidelines>
**What belongs in STRUCTURE.md:**
- Directory layout (ASCII tree)
- Purpose of each directory
- Key file locations (entry points, configs, core logic)
- Naming conventions
- Where to add new code (by type)
- Special/generated directories

**What does NOT belong here:**
- Conceptual architecture (that's ARCHITECTURE.md)
- Technology stack (that's STACK.md)
- Code implementation details (defer to code reading)
- Every single file (focus on directories and key files)

**When filling this template:**
- Use `tree -L 2` or similar to visualize structure
- Identify top-level directories and their purposes
- Note naming patterns by observing existing files
- Locate entry points, configs, and main logic areas
- Keep directory tree concise (max 2-3 levels)

**ASCII tree format:**
```
root/
├── dir1/           # Purpose
│   ├── subdir/    # Purpose
│   └── file.ext    # Purpose
├── dir2/          # Purpose
└── file.ext        # Purpose
```

**Useful for phase planning when:**
- Adding new features (where should files go?)
- Understanding project organization
- Finding where specific logic lives
- Following existing conventions
</guidelines>
